[DONE] Load Ginga observations into database
mysql -u root -p
Enter password: 
mysql> LOAD DATA LOCAL INFILE 'ginga_obs.dump'
    -> INTO TABLE ginga.GINGA_OBS
    -> FIELDS TERMINATED BY '|'
    -> LINES TERMINATED BY '\n'
    -> IGNORE 15 LINES
    -> (SEQ_NO, TARGET_NAME, AVE_ALPHA, AVE_DELTA, MAX_ALPHA, MAX_DELTA, MIN_ALPHA, MIN_DELTA, RIKAKU, @start_time_variable, @end_time_variable, POINTING)   
    -> SET STARTTIME=STR_TO_DATE(@start_time_variable,'%d-%b-%Y'), ENDTIME=STR_TO_DATE(@end_time_variable,'%d-%b-%Y');
Query OK, 7318 rows affected, 53364 warnings (0.10 sec)
Records: 7318  Deleted: 0  Skipped: 0  Warnings: 53364

[DONE] Improve performance: database indexes on DATE and TARGET

[DONE] Date format:hh vs. HH!! LacDumpParser, Main

File naming convenion using datetime

LACDUMP MODE(MPC1,MPC2,MPC3,PCHK,ACS) which are the null values from?

Correlate spectral files with observation list

Add timing

Ideas: 
Taverna
Apache CLI
Maven application bundle

Blank sky subtraction

How to add spoint columns to all rows....
SELECT INTO #TempTable FROM WHERE
UPDATE FROM 
http://techblog.net-a-porter.com/2013/08/dbixmultirow-updating-multiple-database-rows-quickly-and-easily/

MySQL: 
CREATE TEMPORARY TABLE ginga.OBSERVATION_TEMP 
(select AVE_ALPHA, AVE_DELTA, MIN_ALPHA, MIN_DELTA, MAX_ALPHA, MAX_DELTA from ginga.OBSERVATION where TARGET_NAME='GS2000+25' );
DROP TABLE ginga.OBSERVATION_TEMP;
http://www.mysqltutorial.org/mysql-temporary-table/

select spoint(AVE_ALPHA*pi()/180.0,AVE_DELTA*pi()/180.0) from ginga.OBSERVATION where TARGET_NAME='GS2000+25' and OBSERVATION_ID=1581;

Custom dialect with DIF
http://keyurj.blogspot.com.es/2012/12/creating-custom-dialect-in-hibernate.html

==================================
Ginga Toolbox Virtual Machine
==================================

1. Install Ubuntu Virtual Box

Install: http://www.psychocats.net/ubuntu/virtualbox
Share folder:  https://help.ubuntu.com/community/VirtualBox/SharedFolders

Download Ubuntu amd64 14.04.1 iso
4 GB RAM
20 GB Memory (Fixed size)
2 CPUs, Video capture, Enable 3D Acceleration
OS user/pwd: ginga/ginga
Keyboard layout: English (UK)
Right CTRL+F -> Full screen mode

Install Guest Tools:
sudo apt-get install virtualbox-guest-dkms virtualbox-guest-utils virtualbox-guest-x11
Reboot

2. Copy Ginga data

Share folder /Users/iortiz/Personal/ginga/data from VirtualBox as data (/media/sf_data)
Copy frf, tools and lacdump directories plus ginga_obs.dump from shared folder to /data/ginga (6.3GB)
sudo cp -r /media/sf_data/pub/ginga/frf /data/ginga/
sudo cp -r /media/sf_data/pub/ginga/lacdump /data/ginga/
sudo cp /media/sf_data/pub/ginga/ginga_obs.dump /data/ginga/

sudo chown -R ginga:ginga /data/ginga

3. Install Java

http://www.webupd8.org/2012/01/install-oracle-java-jdk-7-in-ubuntu-via.html
http://www.duinsoft.nl/packages.php?t=en
http://askubuntu.com/questions/56104/how-can-i-install-sun-oracles-proprietary-java-jdk-6-7-8-or-jre

sudo apt-get remove openjdk-7-jre default-jre default-jre-headless
sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java7-installer

4. Install building software

sudo apt-get git
sudo apt-get maven

5. Install Ginga Tools

sudo apt-get install gfortran
sudo apt-get install csh
cd $HOME
wget http://www.darts.isas.jaxa.jp/pub/ginga/tools/ginga_tools_linux_v1.02.tar.gz .
tar xvfz ginga_tools_linux_v1.01.tar.gz 
rm ginga_tools_linux_v1.02.tar.gz 
Edit .bashrd 
GINGA_TOOLS_HOME=/home/ginga/ginga_tools/v1.02
GINGA_FRFDIR=/data/ginga/frf
GINGA_CALDIR=$GINGA_TOOLS_HOME/cal
PFILES=$HOME/pfiles
PGPLOT_FONT=/data/ginga/fonts/grfont.dat
export GINGA_TOOLS_HOME
export GINGA_FRFDIR
export GINGA_CALDIR
export PFILES
export PGPLOT_FONT

export PATH=$GINGA_TOOLS_HOME/bin/linux/:$PATH

cd $HOME
mkdir pfiles
cp $GINGA_TOOLS_HOME/cal/lac2xspec.par ~/pfiles

Edit make_sf_list.pl: perl and lacdump directory location

Make 64-bit machine to support 32-bit executables
sudo dpkg --add-architecture i386
sudo apt-get install ia32-libs
sudo apt-get install lib32z1 lib32ncurses5 lib32bz2-1.0

6. Install Ginga Toolbox

git clone https://inaki-ortizdelandaluce@bitbucket.org/inaki-ortizdelandaluce/ginga-toolbox.git
mvn clean package jar:jar appassembler:assemble assembly:assembly
cp target/ginga-toolbox-1.0.tar.gz ~/
tar xvfz ginga-toolbox-1.0.tar.gz
ln -s ginga-toolbox-1.0 ginga-toolbox-1.0

7 Install MySQL 5.6
http://dev.mysql.com/doc/refman/5.5/en/installing-source-distribution.html
http://askubuntu.com/questions/309677/mysql-5-6-12-installation-from-source-code

sudo apt-get install cmake
sudo apt-get install libncurses5 libncurses5-dev
Download mysql-5.6.21.tar.gz sources
sudo cp mysql-5.6.21.tar.gz /usr/src/mysql/
cd /usr/src/mysql/ 
sudo tar xvfz mysql-5.6.21.tar.gz

# Preconfiguration setup
shell> sudo groupadd mysql
shell> sudo useradd -r -g mysql mysql

# Beginning of source-build specific instructions
shell> tar zxvf mysql-VERSION.tar.gz
shell> cd mysql-VERSION
shell> cmake .
shell> make
shell> sudo make install
# End of source-build specific instructions

# Postinstallation setup
shell> cd /usr/local/mysql
shell> sudo chown -R mysql .
shell> sudo chgrp -R mysql .
shell> sudo scripts/mysql_install_db --user=mysql

Fails[SOLVED]:
sudo cp /usr/local/mysql/share/english/errmsg.sys /usr/share/mysql/errmsg.sys 
sudo chown mysql:mysql /usr/share/mysql/errmsg.sys

shell> sudo chown -R root .
shell> sudo chown -R mysql data
shell> sudo chgrp -R mysql .

# Next command is optional
shell> sudo cp support-files/my-medium.cnf /etc/my.cnf
shell> sudo bin/mysqld_safe --user=mysql &

# Next command is optional
shell> sudo cp support-files/mysql.server /etc/init.d/mysql.server


# MySQL 'root' user: root/root
/usr/local/mysql/bin/mysqladmin -u root password root

8. MySQL configuration

8.1 Creation to a MySQL admin user
Admin user 'dbadmin' created by root, password protected and could connect from everywhere.
For that purpose dbadmin has to be created limited to 'localhost' first and then with '%'.
Password initially set to same as username.

-bash-4.1$ mysql --user root -p
mysql> CREATE USER 'dbadmin'@'localhost' IDENTIFIED BY 'dbadmin';
mysql> GRANT ALL PRIVILEGES ON *.* TO 'dbadmin'@'localhost' WITH GRANT OPTION;
mysql> CREATE USER 'dbadmin'@'%' IDENTIFIED BY 'dbadmin';
mysql> GRANT ALL PRIVILEGES ON *.* TO 'dbadmin'@'%' WITH GRANT OPTION;

8.2 MySQL Workbench installation and setup
Created an account connection from MySQL Workbench using 'dbadmin' 

8.3 Database start/stop configuration

Automatic database start-up:
sudo update-rc.d mysql defaults

Add aliases to start/stop the database on .bashrc

9. Install DIF Database indexing

Prerequisites: 
MySQL sources
Perl
DBD::mysql (installed by synaptic)
http://help.directadmin.com/item.php?id=49

http://ross.iasfbo.inaf.it/dif/


sudo apt-get install build-essential g++
sudo apt-get install libmysqlclient-dev
sudo ./configure --with-mysql-source=/usr/src/mysql/mysql-5.6.21
sudo make
sudo make install
sudo dif --install

